<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"/>
  <title>Car Compass Online ‚Äî Dashboard Direction Display | PointMe.live</title>
  <meta name="description" content="Free online car compass with large dashboard-style heading display. Use your phone as a compass while driving."/>
  <meta name="robots" content="index, follow"/>
  <link rel="canonical" href="https://pointme.live/car.html"/>
  <link rel="stylesheet" href="styles.css"/>
  <style>
    body { overflow: hidden; }
    main {
      flex:1; display:flex; flex-direction:column;
      align-items:center; justify-content:center;
      padding: 16px; gap: 0;
    }
    /* Dashboard mode: emphasize degree number */
    #degreeDisplay {
      font-size: clamp(5rem, 22vw, 9rem) !important;
      line-height: 0.9;
    }
    #directionDisplay { font-size: clamp(2rem, 8vw, 3.5rem) !important; }
    .compass-wrapper { width: min(280px, 70vw); height: min(280px, 70vw); }
    .note { font-size:0.72rem; color:var(--text-muted); text-align:center; margin-top:10px; max-width:360px; }
  </style>
</head>
<body>
<nav class="site-nav" role="navigation">
  <a class="nav-logo" href="./index.html">PointMe<span>.live</span></a>
  <button class="nav-toggle" aria-label="Toggle menu"><span></span><span></span><span></span></button>
  <ul class="nav-links">
    <li><a href="./index.html">Home</a></li><li><a href="./about.html">About</a></li>
    <li><a href="./how-to-use.html">How to Use</a></li><li><a href="./qibla-finder.html">Qibla</a></li>
    <li><a href="./full-screen.html">Full-Screen</a></li><li><a href="./blog.html">Blog</a></li>
    <li><a href="./contact.html">Contact</a></li>
  </ul>
</nav>
<button id="fsBtn" title="Fullscreen">‚õ∂</button>

<main>
  <div style="font-family:var(--font-display);font-size:clamp(1rem,4vw,1.4rem);font-weight:700;text-align:center;margin-bottom:12px;color:var(--green);">üöó Car Compass</div>

  <div class="compass-wrapper" role="img" aria-label="Car compass">
    <div class="compass-ring"></div>
    <svg id="compassRose" viewBox="0 0 360 360" xmlns="http://www.w3.org/2000/svg">
      <defs><filter id="glow"><feGaussianBlur stdDeviation="3" result="b"/><feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge></filter></defs>
      <g id="compassRose-ticks"></g>
      <text x="180" y="34" text-anchor="middle" dominant-baseline="middle" font-family="Orbitron,sans-serif" font-size="22" font-weight="900" fill="#00ff41" filter="url(#glow)">N</text>
      <text x="180" y="332" text-anchor="middle" dominant-baseline="middle" font-family="Orbitron,sans-serif" font-size="16" fill="rgba(0,255,65,0.5)">S</text>
      <text x="330" y="183" text-anchor="middle" dominant-baseline="middle" font-family="Orbitron,sans-serif" font-size="16" fill="rgba(0,255,65,0.5)">E</text>
      <text x="30"  y="183" text-anchor="middle" dominant-baseline="middle" font-family="Orbitron,sans-serif" font-size="16" fill="rgba(0,255,65,0.5)">W</text>
    </svg>
    <div id="needle"><div class="needle-north"></div><div class="needle-south"></div></div>
    <div class="center-dot"></div>
  </div>

  <div class="data-panel">
    <div id="degreeDisplay">---¬∞</div>
    <div id="directionDisplay">---</div>
  </div>

  <p id="statusMsg" style="font-size:.72rem;color:var(--text-muted);text-align:center;margin-top:6px;">Tap Start</p>
  <button id="startBtn" class="btn btn-primary" style="margin-top:12px;">‚äï Start</button>
  <div id="calibHint">‚Üª Figure-8 to recalibrate</div>
  <p class="note">‚ö† Do not operate phone while driving. Set up before departure and keep phone in a safe mount.</p>
</main>

<script src="scripts.js"></script>
<script>
  const rose=document.getElementById('compassRose'),needle=document.getElementById('needle'),
        degEl=document.getElementById('degreeDisplay'),dirEl=document.getElementById('directionDisplay'),
        statusEl=document.getElementById('statusMsg'),startBtn=document.getElementById('startBtn'),
        calibEl=document.getElementById('calibHint');
  let running=false,calibTimer=null;
  buildCompassRoseTicks('compassRose');
  initFullscreenBtn('fsBtn');
  document.documentElement.requestFullscreen().catch(()=>{});
  function onHeading(h){
    const r=Math.round(h);degEl.textContent=r+'¬∞';dirEl.textContent=headingToDir(r);
    rose.style.transform=`rotate(${-h}deg)`;needle.style.transform=`translateX(-50%) translateY(-100%) rotate(0deg)`;
    if(!calibTimer)calibTimer=setTimeout(()=>calibEl.classList.add('visible'),3500);
  }
  startBtn.addEventListener('click',async()=>{
    if(running)return;
    const ok=await startCompass({onStatus:m=>statusEl.textContent=m,
      onPermissionGranted:()=>{startBtn.classList.add('hidden');statusEl.textContent='‚óè LIVE';running=true;},onHeading});
    if(ok&&typeof DeviceOrientationEvent.requestPermission!=='function'){startBtn.classList.add('hidden');statusEl.textContent='‚óè LIVE';running=true;}
  });
</script>
</body>
</html>
